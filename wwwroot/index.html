<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AZDO Board Metrics MVP</title>
  <link rel="stylesheet" href="/styles.css?v=20260101-perf5"/>
</head>
<body>
  <header>
    <div class="title">AZDO Board Metrics (MVP)</div>
    <div class="sub">build: 2026-01-01 review-assign2 | Sadece In Progress | Not (Pool) | Forecast ...me <span class="build">build: 2026-01-01 review-assign-v1</span></div>
  </header>

  <main>
    <section class="mainTabs">
      <button id="viewTab_board" class="tabBtn active" type="button">Board</button>
      <button id="viewTab_review" class="tabBtn" type="button">Code Review Ataması</button>
      <button id="viewTab_assign" class="tabBtn" type="button">Atanacak Maddeler</button>
      <button id="viewTab_perf" class="tabBtn" type="button">Kişisel Bazlı Performans</button>
    </section>

    <!-- -------------------- BOARD VIEW -------------------- -->
    <div id="view_board">
      <section class="filters">
        <label>
          Assignee (uniqueName):
          <input id="assignee" placeholder="a@company.com"/>
        </label>

        <label>
          Gösterim:
          <select id="mode">
            <option value="all">Tümü</option>
            <option value="pool">Pool (Not var)</option>
          </select>
        </label>

        <button id="refresh" type="button">Yenile</button>
        <span id="status"></span>
      </section>

      <section class="legend">
        <span class="chip chip-pool">Pool: Not girilmiş</span>
        <span class="chip chip-late">Forecast &gt; Due: gecikme riski</span>
        <span class="chip chip-early">Forecast &lt; Due: erken</span>
        <span class="chip chip-overdue">Start → Due geçmiş</span>
        <span class="chip chip-forecastOverdue">Start → ForecastDue geçmiş</span>
      </section>

      <section class="tableWrap">
        <table id="tbl">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Assignee</th>
              <th>State</th>
              <th>Effort</th>
              <th>Start</th>
              <th>Due</th>
              <th>Done</th>
              <th>ExpDays</th>
              <th>ForecastDue</th>
              <th>ForecastVar</th>
              <th>Slack</th>
              <th>Pool</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      
    </div>

    <!-- -------------------- CODE REVIEW ASSIGNMENT VIEW -------------------- -->
    <div id="view_review" class="hidden">
      <section class="filters">
<label>
          Assignee filtre (opsiyonel):
          <input id="review_assignee" placeholder="a@company.com"/>
        </label>

        <button id="review_refresh" type="button">Yenile</button>
        <span id="review_status"></span>
      </section>

      <section class="hint">
        Bu liste <b>Ready for Code Rewiew</b> kolonundaki maddelerden gelir. Önce mevcut <b>Review Owner</b> değerini görürsün; yanındaki dropdown ile yeni kişiyi seçip <b>Ata</b> diyebilirsin.
      </section>

      <section class="tableWrap">
        <table id="tbl_review">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Assignee</th>
              <th>Review Owner</th>
              <th>Review Owner Ata</th>
              <th>State</th>
              <th>Column</th>
              <th>İşlem</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </div>
  

    

    <!-- -------------------- ATANACAK MADDELER VIEW -------------------- -->
    <div id="view_assign" class="hidden">
      <section class="filters assignFilters">
        <div class="filterRow">
          <div class="filterLeft">
            <label>
              Assigned To:
              <select id="assign_assignee"></select>
            </label>

            <label>
              Type:
              <select id="assign_type">
                <option value="" selected>Bug + Backlog</option>
                <option value="bug">Bug</option>
                <option value="backlog">Backlog</option>
              </select>
            </label>

            <label>
              Sort By:
              <select id="assign_sortBy">
                <option value="id">Id</option>
                <option value="relevance">Relevance</option>
                <option value="created">Created Date</option>
                <option value="changed" selected>Changed Date</option>
              </select>
            </label>

            <label>
              Order:
              <select id="assign_sortOrder">
                <option value="asc">Ascending</option>
                <option value="desc" selected>Descending</option>
              </select>
            </label>

            <div class="dd" id="assign_tags_dd">
              <button id="assign_tags_btn" type="button" class="ddBtn">Tags</button>
              <div id="assign_tags_menu" class="ddMenu hidden">
                <div class="ddHead">
                  <div class="ddMode">
                    <span class="muted">Mode:</span>
                    <label class="ddRadio"><input type="radio" name="assign_tag_mode" value="or" checked> OR</label>
                    <label class="ddRadio"><input type="radio" name="assign_tag_mode" value="and"> AND</label>
                  </div>
                </div>
                <div id="assign_tags_list" class="tagsBox"></div>
              </div>
            </div>

            <button id="assign_refresh" type="button">Yenile</button>
            <span id="assign_status"></span>
          </div>

          <div class="filterRight"></div>
        </div>
      </section>

      <section class="assignSection">
        <div class="sectionTitle">Atanacak Maddeler</div>
        <div class="kanban" id="assign_board">
          <div class="kanCol" data-priority="0" data-kind="story">
            <div class="kanHead">
              <div class="kanTitle">Stories (New)</div>
              <div class="kanActions">
                <button class="kanSortBtn" data-sort="default" type="button" title="Default">Default</button>
                <button class="kanSortBtn" data-sort="oldest" type="button" title="Önce açılanlar">↑</button>
                <button class="kanSortBtn" data-sort="newest" type="button" title="Sonra açılanlar">↓</button>
              </div>
            </div>
            <div class="kanBody" id="assign_col_story"></div>
          </div>

          <div class="kanCol" data-priority="1">
            <div class="kanHead">
              <div class="kanTitle">Priority 1</div>
              <div class="kanActions">
                <button class="kanSortBtn" data-sort="default" type="button" title="Default">Default</button>
                <button class="kanSortBtn" data-sort="oldest" type="button" title="Önce açılanlar">↑</button>
                <button class="kanSortBtn" data-sort="newest" type="button" title="Sonra açılanlar">↓</button>
              </div>
            </div>
            <div class="kanBody" id="assign_col_p1"></div>
          </div>

          <div class="kanCol" data-priority="2">
            <div class="kanHead">
              <div class="kanTitle">Priority 2</div>
              <div class="kanActions">
                <button class="kanSortBtn" data-sort="default" type="button" title="Default">Default</button>
                <button class="kanSortBtn" data-sort="oldest" type="button" title="Önce açılanlar">↑</button>
                <button class="kanSortBtn" data-sort="newest" type="button" title="Sonra açılanlar">↓</button>
              </div>
            </div>
            <div class="kanBody" id="assign_col_p2"></div>
          </div>

          <div class="kanCol" data-priority="3">
            <div class="kanHead">
              <div class="kanTitle">Priority 3</div>
              <div class="kanActions">
                <button class="kanSortBtn" data-sort="default" type="button" title="Default">Default</button>
                <button class="kanSortBtn" data-sort="oldest" type="button" title="Önce açılanlar">↑</button>
                <button class="kanSortBtn" data-sort="newest" type="button" title="Sonra açılanlar">↓</button>
              </div>
            </div>
            <div class="kanBody" id="assign_col_p3"></div>
          </div>

          <div class="kanCol" data-priority="4">
            <div class="kanHead">
              <div class="kanTitle">Priority 4</div>
              <div class="kanActions">
                <button class="kanSortBtn" data-sort="default" type="button" title="Default">Default</button>
                <button class="kanSortBtn" data-sort="oldest" type="button" title="Önce açılanlar">↑</button>
                <button class="kanSortBtn" data-sort="newest" type="button" title="Sonra açılanlar">↓</button>
              </div>
            </div>
            <div class="kanBody" id="assign_col_p4"></div>
          </div>
        </div>
      </section>
    </div>

    <!-- -------------------- KİŞİSEL BAZLI PERFORMANS VIEW -------------------- -->
    <div id="view_perf" class="hidden">
      <div class="perfGrid">
        <div class="perfLeft">
          <section class="filters perfFilters">
            <div class="filterRow">
              <div class="filterLeft">
                <label>
                  User:
                  <select id="perf_user"></select>
                </label>

                <label>
                  Yıl:
                  <select id="perf_year"></select>
                </label>

                <label>
                  Ay:
                  <select id="perf_month"></select>
                </label>

                <label>
                  Hafta:
                  <select id="perf_week"></select>
                </label>

                <button id="perf_refresh" type="button">Yenile</button>
                <span id="perf_status"></span>
              </div>
            </div>
          </section>

          <section class="tableWrap">
            <div class="sectionTitle">Kişisel Bazlı Performans</div>
            <table id="tbl_perf">
              <thead>
                <tr>
                  <th>User</th>
                  <th>Stories</th>
                  <th>Bugs</th>
                  <th>To Do (Task)</th>
                  <th>In Progress</th>
                  <th>Done</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <div class="hint">Satıra tıklayınca sağdaki grafik ve alttaki Done listesi o kullanıcıya göre güncellenir.</div>
          </section>

          <section class="tableWrap perfDoneWrap">
            <div class="sectionTitle">Done Statüsündeki Maddeler</div>
            <table id="tbl_perf_done">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Title</th>
                  <th>Type</th>
                  <th>Effort</th>
                  <th>Start</th>
                  <th>Due</th>
                  <th>Completed</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </section>
        </div>

        <div class="perfRight">
          <section class="perfChartWrap">
            <div class="sectionTitle">Done Effort (Bug vs Backlog)</div>
            <div class="chartCard">
              <div id="perf_chart_title" class="chartTitle"></div>
              <div id="perf_metrics" class="perfMetrics"></div>
              <div class="chartCanvasWrap">
                <canvas id="perf_candle" width="2000" height="520"></canvas>
                <div id="perf_tip" class="tooltip hidden"></div>
              </div>
              <div class="hint">Grafik üstüne gelince o gün tamamlanan Bug/Backlog maddeleri ve eforları (ID→Effort) görünür.</div>
            </div>
          </section>
        </div>
      </div>
    </div>

<!-- -------------------- DETAIL (GLOBAL) -------------------- -->
    <section id="detail" class="detail hidden">
        <div class="detailHeader">
          <div>
            <div id="d_title" class="dTitle"></div>
            <div id="d_meta" class="dMeta"></div>
          </div>
          <button id="close" type="button">Kapat</button>
        </div>

        <div class="cards">
          <div class="card">
            <div class="cardTitle">Not / Yorum</div>

            <div class="subTabs">
              <button id="tab_note" class="subTab active" type="button">Not (Pool)</button>
              <button id="tab_comment" class="subTab" type="button">Yorum</button>
            </div>

            <div id="pane_note" class="pane">
              <textarea id="fb_note" rows="4" placeholder="Maddeyi etkileyen konu / engel / rework / context switch vb. not..."></textarea>
              <button id="sendFb" type="button">Kaydet</button>
              <div id="fb_list" class="list"></div>
            </div>

            <div id="pane_comment" class="pane hidden">
              <textarea id="comment_text" rows="4" placeholder="Azure DevOps work item yorumuna eklenecek metin..."></textarea>
              <button id="sendComment" type="button">Yorum Yap</button>
              <div class="hint">Yorum, Azure DevOps Discussion/Comments kısmına gider.</div>
            </div>
          </div>

          <div class="card">
            <div class="cardTitle">Açıklama</div>
            <div id="d_desc" class="desc">(açıklama yok)</div>
          </div>

          <div class="card">
            <div class="cardTitle">Ham Link</div>
            <div class="linkRow">
              <a id="d_url" target="_blank" rel="noreferrer">Azure DevOps'ta aç</a>
            </div>
            <div class="hint">Not: Bu ekran sadece okuma + not (pool) + yorum amaçlı.</div>
          </div>
        </div>
      </section>

</main>

  <script src="/app.js?v=20260101-perf5"></script>
</body>
</html>
